<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head ('Ticket Logger - Home')"></head>


<body class="d-flex flex-column h-100">


<!-- Insertar el fragmento del header -->

<header th:replace="fragments/header :: header"></header>

<!-- Contenido dinÃ¡mico -->

<main class="form-page">
    <div class="form-card">

        <div class="text-center mb-3">
            <img th:src="${userProfileForm.profileImage} != null ?
                          ${userProfileForm.profileImage} :
                          @{/images/avatar.svg}"
            alt="Avatar" class="img-thumbnail rounded-circle"
            style="width: 120px; height: 120px; object-fit: cover;">
        </div>



        <h1 th:text="#{msg.userProfile.title}"></h1>
        <p class="text-muted" th:text="#{msg.userProfile.subtitle}"></p>

        <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>

        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

        <form th:action="@{/profile/update}"
              th:object="${userProfileForm}"
              method="post"
              enctype="multipart/form-data"
              class="mt-3">

            <input type="hidden" th:field="*{userId}" />

            <div class="mb-3">
                <label for="email" class="form-label" th:text="#{msg.userProfile.field.email}"></label>
                <input type="text" id="email" th:field="*{email}" class="form-control" readonly />
            </div>
            <div class="mb-3">
                <label for="firstName" class="form-label" th:text="#{msg.userProfile.field.firstName}"></label>
                <input type="text" id="firstName" th:field="*{firstName}" class="form-control" />
                <div th:if="${#fields.hasErrors('firstName')}" class="text-danger" th:errors="*{firstName}"></div>
            </div>

            <div class="mb-3">
                <label for="lastName" class="form-label" th:text="#{msg.userProfile.field.lastName}"></label>
                <input type="text" id="lastName" th:field="*{lastName}" class="form-control" />
                <div th:if="${#fields.hasErrors('lastName')}" class="text-danger" th:errors="*{lastName}"></div>
            </div>

            <div class="mb-3">
                <label for="phoneNumber" class="form-label" th:text="#{msg.userProfile.field.phoneNumber}"></label>
                <input type="text" id="phoneNumber" th:field="*{phoneNumber}" class="form-control" />
                <div th:if="${#fields.hasErrors('phoneNumber')}" class="text-danger" th:errors="*{phoneNumber}"></div>
            </div>

            <div class="mb-3">
                <label for="profileImageFile" class="form-label" th:text="#{msg.userProfile.field.profileImageUpload}"></label>
                <input type="file" id="profileImageFile"  name="profileImageFile" accept="image/*" class="form-control" />
                <small class="form-text text-muted" th:text="#{msg.userProfile.field.profileImageUpload.help}"></small>
                <div th:if="${#fields.hasErrors('profileImage')}" class="text-danger" th:errors="*{profileImage}"></div>
            </div>

            <div class="mb-3">
                <label for="bio" class="form-label" th:text="#{msg.userProfile.field.bio}"></label>
                <textarea id="bio" th:field="*{bio}" rows="3" class="form-control"></textarea>
                <div th:if="${#fields.hasErrors('bio')}" class="text-danger" th:errors="*{bio}"></div>
            </div>

            <div class="mb-3">
                <label for="locale" class="form-label" th:text="#{msg.userProfile.field.locale}"></label>
                <input type="text" id="locale" th:field="*{locale}" class="form-control" placeholder="es_ES, en_GB, ..." />
                <div th:if="${#fields.hasErrors('locale')}" class="text-danger" th:errors="*{locale}"></div>
            </div>

            <button type="submit" class="btn btn-primary" th:text="#{msg.userProfile.action.save}"></button>
            <a th:href="@{/}" class="btn btn-secondary ms-2" th:text="#{msg.userProfile.action.back}"></a>

        </form>
    </div>


</main>

<!-- Insertar el fragmento del footer -->

<footer th:replace="fragments/footer :: footer"></footer>

<div th:replace="fragments/scripts :: scripts"></div>

</body>

</html>